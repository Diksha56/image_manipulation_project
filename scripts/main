import cv2
import numpy as np
import matplotlib.pyplot as plt
import os

input_folder = "original_images"
output_folder = "output_images"
os.makedirs(output_folder, exist_ok=True)

image_path = os.path.join(input_folder, "img.jpg")  
image = cv2.imread(image_path)

if image is None:
    raise FileNotFoundError("Error: Image not found. Check path and filename.")

print("Image loaded successfully!")

gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
cv2.imwrite(os.path.join(output_folder, "grayscale.jpg"), gray_image)

plt.figure(figsize=(6, 4))
plt.imshow(gray_image, cmap="gray")
plt.title("Grayscale Image")
plt.axis("off")
plt.show()

cropped_image = image[100:300, 200:400]
cv2.imwrite(os.path.join(output_folder, "cropped.jpg"), cropped_image)

plt.figure(figsize=(6, 4))
plt.imshow(cv2.cvtColor(cropped_image, cv2.COLOR_BGR2RGB))
plt.title("Cropped Image")
plt.axis("off")
plt.show()

(h, w) = image.shape[:2]
center = (w // 2, h // 2)

rotation_matrix = cv2.getRotationMatrix2D(center, 45, 1.0)
rotated_image = cv2.warpAffine(image, rotation_matrix, (w, h))
cv2.imwrite(os.path.join(output_folder, "rotated_45.jpg"), rotated_image)

plt.figure(figsize=(6, 4))
plt.imshow(cv2.cvtColor(rotated_image, cv2.COLOR_BGR2RGB))
plt.title("Rotated (45Â°)")
plt.axis("off")
plt.show()

brightness_value = 50
bright_image = cv2.add(image, np.full(image.shape, brightness_value, dtype=np.uint8))
cv2.imwrite(os.path.join(output_folder, "brightened.jpg"), bright_image)

plt.figure(figsize=(6, 4))
plt.imshow(cv2.cvtColor(bright_image, cv2.COLOR_BGR2RGB))
plt.title("Brightened Image (+50)")
plt.axis("off")
plt.show()

print("\nAll processed images saved in:", output_folder)